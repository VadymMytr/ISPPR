<html>

<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="calculator.js"></script>
    <script src="ui_utils.js"></script>
</head>

<body style="padding: 2%;">
    <h2 style="text-align: center;">
        Кластерний аналіз
    </h2>

    <table id="input_table" class="table table-bordered">
        <thead class="thead-light">
            <tr>
                <th colspan="100%" style="text-align:center;">Вхідна матриця</th>
            </tr>
            <tr>
                <th></th>
                <th>Attribute1</th>
                <th>Attribute2</th>
                <th>Attribute3</th>
                <th>Attribute4</th>
                <th>Attribute5</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <th>P1</th>
                <td contenteditable="true">15.5</td>
                <td contenteditable="true">0.2</td>
                <td contenteditable="true">0.1</td>
                <td contenteditable="true">105</td>
                <td contenteditable="true">4.1</td>
            </tr>
            <tr>
                <th>P2</th>
                <td contenteditable="true">12.3</td>
                <td contenteditable="true">0.15</td>
                <td contenteditable="true">0.5</td>
                <td contenteditable="true">55</td>
                <td contenteditable="true">4.5</td>
            </tr>
            <tr>
                <th>P3</th>
                <td contenteditable="true">11.2</td>
                <td contenteditable="true">0.18</td>
                <td contenteditable="true">0.2</td>
                <td contenteditable="true">75</td>
                <td contenteditable="true">4.2</td>
            </tr>
            <tr>
                <th>P4</th>
                <td contenteditable="true">17.7</td>
                <td contenteditable="true">0.17</td>
                <td contenteditable="true">0.7</td>
                <td contenteditable="true">100</td>
                <td contenteditable="true">4.7</td>
            </tr>
            <tr>
                <th>P5</th>
                <td contenteditable="true">19.8</td>
                <td contenteditable="true">0.22</td>
                <td contenteditable="true">0.9</td>
                <td contenteditable="true">50</td>
                <td contenteditable="true">5.9</td>
            </tr>
            <tr>
                <th>P6</th>
                <td contenteditable="true">12.5</td>
                <td contenteditable="true">0.16</td>
                <td contenteditable="true">0.8</td>
                <td contenteditable="true">65</td>
                <td contenteditable="true">5.8</td>
            </tr>
            <tr>
                <th>P7</th>
                <td contenteditable="true">12.2</td>
                <td contenteditable="true">0.17</td>
                <td contenteditable="true">0.5</td>
                <td contenteditable="true">80</td>
                <td contenteditable="true">5.5</td>
            </tr>
        </tbody>
    </table>

    <button type="input_btn" class="btn btn-primary btn-lg btn-block"
        onclick="calculateClustersFromInput()">Створити кластери</button>

    <hr></hr>

    <script>
        function calculateClustersFromInput() {
            const inputTable = readInputTable();
            const calculationHTMLresult = createClusters(inputTable);

            document.getElementById("result").innerHTML = calculationHTMLresult;
        }

        function readInputTable() {
            const table = document.getElementById('input_table');
            const rows = table.getElementsByTagName('tr');
            const headerRowsAmount = 2;
            const result = [];

            for (let i = headerRowsAmount; i < rows.length; i++) {
                const row = rows[i];
                const cols = row.getElementsByTagName('td');
                const rowData = [];

                for (let j = 0; j < cols.length; j++) {
                    const cellValue = cols[j].innerText;
                    var numericValue = parseFloat(cellValue);
                    if (!cellValue) {
                        numericValue = 0.0;
                    }

                    rowData.push(numericValue);
                }

                result.push(rowData);
            }

            return result;
        }
    </script>

    <div id="result">
    </div>
</body>

</html>